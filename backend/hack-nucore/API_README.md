# HackNU Bank Backend API

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –±—ç–∫–µ–Ω–¥ –¥–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ NestJS —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º TypeORM –∏ SQLite.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, JWT —Ç–æ–∫–µ–Ω—ã
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–°—á–µ—Ç–∞**: –û—Å–Ω–æ–≤–Ω—ã–µ –∏ —Å–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å—á–µ—Ç–∞ —Å –±–∞–ª–∞–Ω—Å–∞–º–∏
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è
- **–ö–∞—Ä—Ç—ã**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã

## üìã API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/auth`)

- `POST /auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /auth/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`/user`)

- `GET /user/profile` - –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /user/profile` - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –°—á–µ—Ç–∞ (`/accounts`)

- `GET /accounts` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—á–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /accounts/balance` - –ü–æ–ª—É—á–∏—Ç—å –æ–±—â–∏–π –±–∞–ª–∞–Ω—Å
- `GET /accounts/:id` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å—á–µ—Ç
- `GET /accounts/:id/balance` - –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—á–µ—Ç–∞

### –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (`/transactions`)

- `POST /transactions` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
- `GET /transactions` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- `GET /transactions/recent` - –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `GET /transactions/stats` - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- `GET /transactions/:id` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é

### –ö–∞—Ä—Ç—ã (`/cards`)

- `POST /cards` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ä—Ç—É
- `GET /cards` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ä—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /cards/:id` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∫–∞—Ä—Ç—É
- `PATCH /cards/:id/activate` - –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É
- `PATCH /cards/:id/block` - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É
- `PATCH /cards/:id/default` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (`/analytics`)

- `GET /analytics/overview` - –û–±—â–∏–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ–±–∑–æ—Ä
- `GET /analytics/categories` - –ê–Ω–∞–ª–∏–∑ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —Ä–∞—Å—Ö–æ–¥–æ–≤
- `GET /analytics/trends` - –ú–µ—Å—è—á–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã
- `GET /analytics/top-transactions` - –¢–æ–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **NestJS** - Node.js —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **TypeORM** - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **SQLite** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **JWT** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **bcryptjs** - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **class-validator** - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **class-transformer** - –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ `.env.example`):
```bash
DB_DATABASE=hacknu.db
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
PORT=3000
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
npm run start:dev
```

4. –°–æ–±–µ—Ä–∏—Ç–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
```bash
npm run build
npm run start:prod
```

## üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (users)
- `id` - UUID
- `name` - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `email` - Email (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- `password` - –•–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
- `phone` - –¢–µ–ª–µ—Ñ–æ–Ω
- `avatar` - –ê–≤–∞—Ç–∞—Ä
- `isActive` - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –∞–∫–∫–∞—É–Ω—Ç
- `isEmailVerified` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω –ª–∏ email
- `isPhoneVerified` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω –ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω

### –°—á–µ—Ç–∞ (accounts)
- `id` - UUID
- `accountNumber` - –ù–æ–º–µ—Ä —Å—á–µ—Ç–∞
- `type` - –¢–∏–ø —Å—á–µ—Ç–∞ (main, savings, business)
- `balance` - –ë–∞–ª–∞–Ω—Å
- `availableBalance` - –î–æ—Å—Ç—É–ø–Ω—ã–π –±–∞–ª–∞–Ω—Å
- `isActive` - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ —Å—á–µ—Ç
- `currency` - –í–∞–ª—é—Ç–∞
- `userId` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (transactions)
- `id` - UUID
- `type` - –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (transfer, payment, deposit, etc.)
- `status` - –°—Ç–∞—Ç—É—Å (pending, completed, failed, cancelled)
- `category` - –ö–∞—Ç–µ–≥–æ—Ä–∏—è (food, transport, entertainment, etc.)
- `amount` - –°—É–º–º–∞
- `fee` - –ö–æ–º–∏—Å—Å–∏—è
- `description` - –û–ø–∏—Å–∞–Ω–∏–µ
- `recipientName` - –ò–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- `recipientAccount` - –°—á–µ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- `reference` - –†–µ—Ñ–µ—Ä–µ–Ω—Å
- `accountId` - ID —Å—á–µ—Ç–∞

### –ö–∞—Ä—Ç—ã (cards)
- `id` - UUID
- `cardNumber` - –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã
- `maskedNumber` - –ó–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä
- `type` - –¢–∏–ø –∫–∞—Ä—Ç—ã (debit, credit, prepaid)
- `status` - –°—Ç–∞—Ç—É—Å (active, blocked, expired, pending)
- `holderName` - –ò–º—è –¥–µ—Ä–∂–∞—Ç–µ–ª—è
- `expiryDate` - –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è
- `cvv` - CVV –∫–æ–¥
- `isDefault` - –ö–∞—Ä—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- `bankName` - –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞
- `cardDesign` - –î–∏–∑–∞–π–Ω –∫–∞—Ä—Ç—ã
- `userId` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é bcryptjs
- JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π —á–µ—Ä–µ–∑ TypeORM
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
curl -X POST http://localhost:3000/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–¢–∏–º—É—Ä –ï—Å–º–∞–≥–∞–º–±–µ—Ç–æ–≤",
    "email": "timur@example.com",
    "password": "password123",
    "phone": "+7 777 123 4567"
  }'
```

### –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
```bash
curl -X POST http://localhost:3000/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "timur@example.com",
    "password": "password123"
  }'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
```bash
curl -X GET http://localhost:3000/accounts/balance \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```bash
curl -X POST http://localhost:3000/transactions \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "payment",
    "amount": 1500.00,
    "description": "–ü–æ–∫—É–ø–∫–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–µ",
    "category": "shopping",
    "accountId": "ACCOUNT_UUID"
  }'
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. –ò–∑–º–µ–Ω–∏—Ç—å `JWT_SECRET` –Ω–∞ —Å–ª–æ–∂–Ω—ã–π –∫–ª—é—á
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `synchronize: false` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ TypeORM
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL –≤–º–µ—Å—Ç–æ SQLite
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
6. –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏


MIT License
